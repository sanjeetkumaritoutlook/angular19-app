<fluid-page page-title="Forms Playground">

  <fluid-grid>
    <fluid-grid-item [colSm]="10">
      <fluid-form *ngIf="formConfig" #formRef
                  [config]="formConfig"
                  (valueChanged)="onFormEvent('valueChanged', $event.detail)"
                  (formChanged)="onFormEvent('formChanged', $event.detail)"
                  (actionClicked)="onFormEvent('actionClicked', $event.detail)">
      </fluid-form>
    </fluid-grid-item>
    <fluid-grid-item [colSm]="2">
      <fluid-button *ngIf="!!formConfig"
                    label="Set Form Array Value"
                    (click)="setArrayValue()">
      </fluid-button>
      <fluid-button *ngIf="!!formConfig"
                    popover="Clicking this button will toggle the disabled state of every field in the form"
                    [label]="formDisabled ? 'Enable Form' : 'Disable Form'"
                    color="tertiary"
                    (click)="toggleFormEnabled()">
      </fluid-button>
      <fluid-button *ngIf="!!formConfig"
                    popover="Clicking this button will reset the forms disabled state to the original configured values"
                    label="Reset Disabled State"
                    color="primary"
                    (click)="resetFormDisabled()">
      </fluid-button>
      <fluid-button *ngIf="hasElement('myTextInput')"
                    popover="Clicking this button disable/enable myTextInput using setDisabled"
                    color="secondary"
                    [label]="states['myTextInput'] ? 'Enable myTextInput' : 'Disable myTextInput'"
                    (click)="toggleDisabled('myTextInput')">
      </fluid-button>
      <fluid-button *ngIf="hasElement('myTextInput')"
                    popover="Clicking this button disable/enable myTextInput using setElementConfig with key/value"
                    color="secondary"
                    [label]="states['myTextInput'] ? 'Enable myTextInput' : 'Disable myTextInput'"
                    (click)="toggleElementConfig('myTextInput')">
      </fluid-button>
      <fluid-button *ngIf="hasElement('myTextInput')"
                    popover="Clicking this button disable/enable myTestInput using setElementConfig with partial config update"
                    color="secondary"
                    [label]="states['myTextInput'] ? 'Enable myTextInput' : 'Disable myTextInput'"
                    (click)="toggleElementConfigByUpdate('myTextInput')">
      </fluid-button>

    </fluid-grid-item>
  </fluid-grid>

  <fluid-loading-skeleton [config]="loadingSkeletonConfig" *ngIf="!formConfig"></fluid-loading-skeleton>


  <fluid-button *ngFor="let config of configs" [label]="config.label" (click)="setConfig(config)"></fluid-button>

  <fluid-card card-title="Form State" *ngIf="formConfig">
    <fluid-alert [visible]="!!formConfig"
                 [message]="formValid ? 'Form is Valid!' : 'Form is Invalid!'"
                 [severity]="formValid ? 'success' : 'error'">
    </fluid-alert>
    <fluid-code-block *ngIf="!!formErrors" [code]="formErrors | json"></fluid-code-block>
  </fluid-card>
  <fluid-card *ngIf="formConfig" remove-header-border [collapsed]="true" card-title="Form Configuration">
    <fluid-code-block [code]="formConfig | json"></fluid-code-block>
  </fluid-card>

  <fluid-card *ngIf="firedEvents().length > 0" remove-header-border [collapsed]="true" card-title="Event Output">
    <fluid-grid>
      <fluid-grid-item *ngFor="let event of firedEvents()" [colSm]="6">
        <fluid-title level="3">{{event.event}}</fluid-title>
        <fluid-code-block [code]="(event.data | json)"></fluid-code-block>
      </fluid-grid-item>
    </fluid-grid>
  </fluid-card>

</fluid-page>